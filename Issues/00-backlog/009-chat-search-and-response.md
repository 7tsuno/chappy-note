# 009: チャット検索応答フロー（MVP簡略版）

## 目的
- ChatGPTで「前に学んだ○○は？」と尋ねた際、`notes.search`だけで最低限のサマリーテキストを返し、ユーザーが必要に応じて「開いて」と指示できる状態にする。

## スコープ
- `notes.search`の`content`に件数と上位1件のタイトル＋抜粋を含む定型文をセットする。
- 検索ヒットが0件のとき、単純なリトライ案内（例: キーワード短縮/タグ解除）を返す。
- structuredContentは既存の`notePreview`をそのまま利用し、新しいCTAや`notes.open`ツールは追加しない。
- Fastifyログに `query/tags/hits` を残し、簡易デバッグを可能にする。

## 前提Issue
- 001: モノレポ基盤構築
- 002: ドメインモデルと共通ユーティリティ定義
- 004: MCPサーバーコアとツール定義
- 005: タグ自動付与と検索基盤
- 008: ノート一覧・詳細ビュー実装

## 完了条件
- 検索ヒットあり: ChatGPTへの返信テキストに「件数 + 上位1件のタイトルと抜粋 + 『必要なら開いてと指示』」が含まれる。
- 検索ヒットなし: 「該当なし + キーワード短縮/タグ解除を提案」が返る。
- `notes.search`実行時にFastifyログへ `query`, `appliedTags`, `hitCount` が記録される。
